<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>CSS 위치 속성(position)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      line-height: 1.6;
    }

    h1,
    h2 {
      color: #2c3e50;
    }

    code {
      background: #f4f4f4;
      padding: 2px 6px;
      border-radius: 4px;
    }

    pre {
      background: #f9f9f9;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 6px;
      overflow-x: auto;
    }

    .demo {
      border: 1px dashed #aaa;
      padding: 20px;
      margin: 20px 0;
      height: 200px;
      overflow: auto;
      position: relative;
    }

    .box {
      width: 80px;
      height: 80px;
      background: #4caf50;
      color: #fff;
      text-align: center;
      line-height: 80px;
    }

    .static {
      position: static;
    }

    .relative {
      position: relative;
      top: 20px;
      left: 20px;
      background: #2196f3;
    }

    .absolute {
      position: absolute;
      top: 20px;
      right: 20px;
      background: #ff5722;
    }

    /* JS로 컨테이너 안에서 고정처럼 보이게 */
    .container-fixed {
      position: absolute;
      background: #2196f3;
    }


    .sticky {
      position: sticky;
      top: 0;
      background: #fbc02d;
    }
  </style>
</head>

<body>
  <h1>CSS 위치 속성(position) 이해하기</h1>
  <p><code>position</code> 속성은 요소가 문서 안에서 어떻게 배치될지를 결정합니다. 주요 값은 <strong>static, relative, absolute, fixed,
      sticky</strong> 입니다.</p>

  <h2>1. static (기본값)</h2>
  <p>기본 위치로, 특별한 좌표 지정이 없으며 문서 흐름에 따라 배치됩니다.</p>
  <pre><code>.box { position: static; }</code></pre>
  <div class="demo">
    <div class="box static">static</div>
  </div>

  <h2>2. relative</h2>
  <p>원래 위치를 기준으로 <code>top, left, right, bottom</code> 값만큼 이동합니다.</p>
  <pre><code>.box { position: relative; top:20px; left:20px; }</code></pre>
  <div class="demo">
    <div class="box relative">relative</div>
  </div>

  <h2>3. absolute</h2>
  <p>가장 가까운 <code>position: relative</code> 또는 <code>absolute</code> 부모를 기준으로 위치가 결정됩니다.</p>
  <pre><code>.box { position: absolute; top:20px; right:20px; }</code></pre>
  <div class="demo">
    <div class="box absolute">absolute</div>
  </div>

  <h2>4. fixed (컨테이너 기준 고정)</h2>
  <p>데모 박스 영역을 기준으로 오른쪽 아래에 고정됩니다. 스크롤해도 움직이지 않습니다.</p>
  <pre><code>.demo {
  position: relative;
  height: 200px;
  overflow: auto;
  }
  .container-fixed {
    position: absolute;
    background: #2196f3;
  }</code></pre>

  <p>스크롤해도 컨테이너 안에서 오른쪽 아래에 붙어있는 것처럼 보입니다.</p>
  <div class="demo" id="demo">
    <div class="box container-fixed" id="fixedBox">fixed</div>
    <p>텍스트로 스크롤을 만들어줍니다.</p>
    <p>텍스트로 스크롤을 만들어줍니다.</p>
    <p>텍스트로 스크롤을 만들어줍니다.</p>
    <p>텍스트로 스크롤을 만들어줍니다.</p>
    <p>텍스트로 스크롤을 만들어줍니다.</p>
    <p>텍스트로 스크롤을 만들어줍니다.</p>
  </div>

  <h2>5. sticky</h2>
  <p>스크롤 위치에 따라 <code>relative</code>처럼 움직이다가 지정한 위치에 도달하면 화면에 고정됩니다.</p>
  <pre><code>.box { position: sticky; top:0; }</code></pre>
  <div class="demo" style="height:200px; overflow:auto;">
    <div class="box sticky">sticky</div>
    <p>스크롤을 내려보면 sticky 박스가 위에 붙어있다가 내려오지 않습니다.</p>
    <p>추가 텍스트로 스크롤을 만들어줍니다.</p>
    <p>추가 텍스트로 스크롤을 만들어줍니다.</p>
    <p>추가 텍스트로 스크롤을 만들어줍니다.</p>
  </div>

  <h2>정리</h2>
  <ul>
    <li><strong>static</strong>: 기본 위치, 문서 흐름에 따름</li>
    <li><strong>relative</strong>: 원래 위치 기준으로 이동</li>
    <li><strong>absolute</strong>: 부모 기준으로 절대 위치</li>
    <li><strong>fixed</strong>: 화면 기준으로 고정</li>
    <li><strong>sticky</strong>: 스크롤에 따라 상대 → 고정</li>
  </ul>

  <script>
    const demo = document.getElementById('demo');
    const box = document.getElementById('fixedBox');

    function updateBoxPosition() {
      const scrollTop = demo.scrollTop;
      const visibleHeight = demo.clientHeight;
      const boxHeight = box.offsetHeight;

      // 보이는 영역의 아래쪽에 맞춰 위치 갱신
      box.style.top = scrollTop + visibleHeight - boxHeight - 20 + 'px';
      box.style.left = demo.clientWidth - box.offsetWidth - 20 + 'px';
    }

    updateBoxPosition();
    demo.addEventListener('scroll', updateBoxPosition);
    window.addEventListener('resize', updateBoxPosition);
  </script>

</body>

</html>